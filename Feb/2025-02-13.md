# 📚 Today I learned

## SQLD 

## 🐳Docker 딥다이브

🐳 마이크로서비스 아키텍처(MSA)란?

🔹 MSA(Microservices Architecture)란?

**마이크로서비스 아키텍처(MSA, Microservices Architecture)**는 하나의 큰 애플리케이션을 여러 개의 작은 서비스(마이크로서비스)로 나누어 개발하고 운영하는 아키텍처 스타일입니다.
각 마이크로서비스는 독립적으로 개발, 배포, 확장 가능하며, 서로 API를 통해 통신합니다.

✅ 쉽게 말해?

👉 "모든 기능을 한 덩어리로 개발하는 대신, 기능별로 잘게 쪼개서 개발하는 방식"

✅ 예를 들면?

모놀리식 아키텍처

📦 하나의 애플리케이션 안에 "회원 관리", "주문 처리", "결제" 기능이 모두 포함

마이크로서비스 아키텍처

📦 "회원 관리", "주문 처리", "결제"를 각각 독립적인 서비스로 개발

🚀 Netflix, Amazon, Google 같은 대규모 시스템에서 많이 사용!


🔹 MSA vs. 모놀리식 아키텍처 비교

구분	모놀리식 아키텍처	마이크로서비스 아키텍처

구조	하나의 애플리케이션으로 구성	여러 개의 독립적인 서비스

배포 방식	전체 코드 변경 후 배포	개별 서비스별 배포 가능

확장성	특정 기능만 확장하기 어려움	필요한 서비스만 개별 확장 가능

장애 영향	하나의 서비스 오류로 전체 다운	일부 서비스 다운에도 다른 기능 정상 작동

팀 구조	하나의 팀이 전체 관리	여러 개의 팀이 독립적으로 개발

기술 스택	하나의 언어 & 프레임워크 사용	서비스별로 다른 기술 스택 가능

✅ 쉽게 말하면?

모놀리식: "한 덩어리로 움직이는 로봇"

MSA: "각 부품이 독립적으로 움직이는 로봇"

🔹 MSA의 핵심 개념

1️⃣ 독립적인 서비스 (Microservices)

각각의 마이크로서비스는 독립적인 코드, 데이터베이스, 배포 시스템을 가짐

한 서비스가 변경되더라도, 다른 서비스에 영향을 주지 않음

2️⃣ API 기반 통신

각 마이크로서비스는 REST API, gRPC, GraphQL, 메시지 큐(Kafka, RabbitMQ) 등을 사용해 통신

3️⃣ 개별 배포 가능 (CI/CD)

하나의 서비스만 수정하고 배포할 수 있어 운영 부담이 적음

Docker + Kubernetes와 같은 컨테이너 기술을 많이 활용

4️⃣ 분산 데이터 관리

각 서비스별로 별도의 데이터베이스를 운영 (DB 공유하지 않음)

서비스 간 데이터 일관성을 유지하려면 이벤트 기반 아키텍처 활용 (Kafka, RabbitMQ 등)

5️⃣ 확장성 & 장애 격리

트래픽이 많은 서비스만 별도로 확장 가능 (예: 결제 시스템)

한 서비스가 다운되더라도 다른 서비스는 정상 작동


🔹 MSA의 장점

✅ 유지보수 용이 → 개별 서비스 수정 가능

✅ 배포 속도 증가 → 한 기능만 변경해도 전체 배포 없이 운영 가능

✅ 확장성 우수 → 특정 서비스만 트래픽 증가 시 확장 가능

✅ 장애 격리 → 한 서비스가 죽어도 다른 서비스는 정상 작동

✅ 다양한 기술 사용 가능 → 서비스별로 Python, Java, Node.js 등 다른 언어 사용 가능

🔹 MSA의 단점

⚠️ 복잡한 운영 관리 → 서비스가 많아지면 네트워크 통신, API 관리가 어려움

⚠️ 분산 데이터 관리 어려움 → 여러 개의 DB를 운영해야 함

⚠️ 배포 및 모니터링 부담 증가 → 각 서비스의 로그, 성능을 개별적으로 모니터링해야 함

⚠️ 네트워크 비용 증가 → 마이크로서비스 간 API 호출이 많아지면서 성능 저하 가능

🔹 MSA를 위한 핵심 기술

✅ Docker & Kubernetes → 마이크로서비스를 컨테이너로 배포하고 관리

✅ API Gateway (Nginx, Kong, Zuul) → 마이크로서비스 간 통신을 효율적으로 관리

✅ 메시지 큐 (Kafka, RabbitMQ) → 서비스 간 비동기 통신 및 이벤트 처리

✅ 서비스 디스커버리 (Eureka, Consul) → 동적으로 서비스 찾기

✅ 분산 트랜잭션 (Saga Pattern, Event Sourcing) → 데이터 일관성 유지

🔹 언제 MSA를 사용할까?

✅ 빠르게 확장해야 하는 대규모 시스템 (Netflix, Amazon 같은 글로벌 서비스)

✅ 여러 개의 독립적인 기능이 필요한 경우 (쇼핑몰의 결제, 배송, 회원 서비스 등)

✅ 다양한 기술 스택을 사용해야 하는 경우 (Python, Java, Node.js 등 혼합 개발)

❌ 스타트업, 작은 프로젝트에는 MSA가 오히려 불필요한 복잡성을 초래할 수도 있음

👉 작은 프로젝트라면 모놀리식 → 점진적 MSA 전환이 더 나은 선택!

### docker compose를 활용한 마이크로서비스 아키텍쳐

프론트엔드 / 백엔드 / 데이터베이스를 포함한 아키텍쳐 구현

my-microservice/

│── backend/        # Node.js 백엔드 서비스

│   ├── server.js   # 백엔드 서버 코드

│   ├── package.json

│   ├── package-lock.json

│── nginx/          # Nginx 설정

│   ├── nginx.conf

│── docker-compose.yml  # Docker Compose 설정 파일

│── .env            # 환경 변수 파일 (선택)

│── README.md       # 프로젝트 설명 파일


실행시 NginX로 실행되며 8080포트로 실행 하지만 백엔드 파일 설정은 따로하지 않아 502 bad gateway 발생





